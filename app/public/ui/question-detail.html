<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- css -->
    <link rel="stylesheet" href="../stylesheets/question-detail.css" />
    <link rel="stylesheet" <!-- css -->
    <link rel="stylesheet" href="../stylesheets/commons.css" />
    <link rel="stylesheet" href="../stylesheets/header.css" />
    <link rel="stylesheet" href="../stylesheets/commons.css" />
    <link rel="stylesheet" href="../stylesheets/footer.css" />



    <!--fonts-->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet">

    <!--axios-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>

<body>

    <div class="wrapper">
        <!--Header Begins Here-->
        <div class="header container ">
            <div class="header-content align-content-center col container">
                <div class="container col-4 ">
                    <a class=" hide center-box-vertical"><img src="../images/icons/outline-menu-white-18/2x/outline_menu_white_18dp.png" /></a>
                </div>

                <div class="brand container col-4 align-content-center">
                    <a class="center-box-vertical" href="index.html">S<sub>O</sub>D</a>
                </div>

                <div class=" border-frame-slim nav-bar container col-4 align-content-center">
                    <nav class="center-box-vertical ">
                        <a id="question-link" class=" pd-10">Questions</a>
                        <a id="profile-link" class="  pd-10">Profile</a>
                    </nav>
                </div>
            </div>
        </div>
        <!--Header Ends Here-->


        <div class="container   main-content flex-wrap ">

            <div class="container pane-l br-regular col-xs-12 col-sm-12 col-md-12 col-lg-4 col-xl-3  mg-l-10 mg-r-10 mg-xs-b-10 mg-sm-b-10 mg-md-b-10 mg-lg-b-10  flex-wrap xs-hide sm-hide md-hide">


            </div>

            <div id="questions-card-holder" class=" pd-t-10 pane-r  col-xs-12 col-sm-12 col-md-12 col-lg-7 col-xl-7   mg-l-10 mg-r-10 mg-xs-b-10 mg-sm-b-10 mg-md-b-10 mg-lg-b-10  ">

                <div id="question-card" class=" question-card container card  br-regular col-xs-11 col-sm-11 col-md-12 col-lg-11 col-xl-11 shadow-dim flex-wrap mg-b-10 ">

                    <!--<div class="container vote-section col-2 center-box-vertical flex-direction-column">
                        <a  class=" center-box-horizontal col-4">
                            <img src="../images/icons/votes/baseline-keyboard_arrow_up-black-18/2x/baseline_keyboard_arrow_up_black_18dp.png" />
                        </a>
                        <a class=" center-box-horizontal col-4">
                            <img src="../images/icons/votes/baseline-keyboard_arrow_down-black-18/2x/baseline_keyboard_arrow_down_black_18dp.png" />
                        </a>
                    </div>-->
                    <div class="col-8 container">
                        <p id="question-content" class="pd-10 condensed-sans-font">
                            Loading Question...
                        </p>
                    </div>

                    <div class=" dosis-font  col-12 pd-10 container">

                        <div class=" col-4 ">
                            <p id="user-info" class="">User: </p>
                        </div>
                        <!--<div class=" col-4 ">
                            <p id="up-votes" class="align-text-center">upvotes: 0</p>
                        </div>
                        <div class=" col-4 ">
                            <p id="down-votes" class="align-text-center">downvotes: 0</p>
                        </div>-->
                        <!-- <div class="col-4 ">
                            <p></p>
                        </div>-->
                    </div>

                </div>

                <div class=" question-card container answer-header  br-regular col-xs-11 col-sm-11 col-md-12 col-lg-11 col-xl-11  flex-wrap  mg-b-10 ">

                    <div class="container vote-section col-2 center-box-vertical flex-direction-column">
                        <h1 class="mg-10 dosis-font">Answers</h1>
                    </div>


                </div>
                <!-- Answer card starts here-->
                <!-- Answer card holds all answers -->
                <div id="answers-card-holder" class=" pd-t-10 pane-r   col-xs-12 col-sm-11 col-md-10 col-lg-11 col-xl-11   mg-l-10 mg-r-10 mg-xs-b-10 mg-sm-b-10 mg-md-b-10 mg-lg-b-10 ">
                    <h3 id="info-text" class="hide answer-card container card  br-regular col-xs-11 col-sm-11 col-md-12 col-lg-11 col-xl-11 shadow-dim flex-wrap mg-b-10 pd-10 dosis-font">No answers</h3>

                    <!-- answers -->
                    <!--<div class=" answer-card container card  br-regular col-xs-11 col-sm-11 col-md-12 col-lg-11 col-xl-11 shadow-dim flex-wrap mg-b-10 ">

                        <div class="container vote-section col-2 center-box-vertical flex-direction-column">
                            <a href="" class=" center-box-horizontal col-4">
                                <img src="../images/icons/votes/baseline-keyboard_arrow_up-black-18/2x/baseline_keyboard_arrow_up_black_18dp.png" />
                            </a>
                            <a class="container align-content-center center-box-horizontal col-4">
                                <img class="" src="../images/icons/baseline-fiber_manual_record-black-18/1x/baseline_fiber_manual_record_black_18dp.png" />
                            </a>
                            <a href="" class="center-box-horizontal col-4">
                                <img src="../images/icons/votes/baseline-keyboard_arrow_down-black-18/2x/baseline_keyboard_arrow_down_black_18dp.png" />
                            </a>
                        </div>
                        <div class="col-8 container">
                            <p class="pd-10 condensed-sans-font">
                                Hello please who is the president of kentucky?
                                The following values are accepted:

                                nowrap
                                The flex items are laid out in a single line which may cause the flex container to overflow. The cross-start is either equivalent to start or before depending flex-direction value. This is the default value.
                                wrap
                                The flex items break into multiple lines. The cross-start is either equivalent to start or before depending flex-direction value and the cross-end is the opposite of the specified cross-start.
                                wrap-reverse
                                Behaves the same as wrap but cross-start and cross-end are permuted.
                            </p>
                        </div>

                        <div class=" dosis-font col-12 pd-10 container">
                            <div class="col-4 ">
                                <p class="align-text-center">User: </p>
                            </div>
                            <div class="align-text-center col-4 ">
                                <p>upvotes: 0</p>
                            </div>
                            <div class="align-text-center col-4 ">
                                <p>downvotes: 0</p>
                            </div>

                        </div>

                    </div>-->




                    <!-- answers end here-->
                </div>

                <div id="answer-input-card" class=" question-top-nav container  br-regular col-xs-11 col-sm-11 col-md-12 col-lg-11 col-xl-11 align-content-center flex-wrap mg-b-10 ">

                    <!--<h3 class="container col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 ">Answer Question</h3>-->

                    <div class="container col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 ">
                        <h1 class="mg-10 dosis-font">Answer Question</h1>
                    </div>

                    <textarea placeholder="" id="answer-text-area" class=" br-regular col-xs-6 col-sm-6 col-md-7 col-lg-7 col-xl-7 outline-slim ">















                    </textarea>

                    <button id="add-answer-button" class="btn-lg mg-l-10 center-box-vertical col-xs-3 col-sm-3 col-md-2 col-lg-2 col-xl-2 ">Publish</button>


                </div>

            </div>
        </div>

        <!--<div class="container align-content-center main-content flex-wrap ">
          
             
             <div class="container panel center-box-vertical br-regular col-xs-11 col-sm-11 col-md-6 col-lg-6 col-xl-4 shadow-dim mg-l-10 mg-r-10 mg-xs-b-10 mg-sm-b-10 mg-md-b-10 mg-lg-b-10  ">
                
            </div>
               
           <div class="container panel center-box-vertical br-regular col-xs-11 col-sm-11 col-md-6 col-lg-6 col-xl-4 shadow-dim  ">

            </div>
             
        
           
        </div>-->

    </div>

    <script src="../javascripts/api.js"></script>
    <script src="../javascripts/components.js"></script>

    <script>
        let infoText = document.getElementById('info-text');
        let profileLinkATag = document.getElementById('profile-link');
        let questionsLinkATag = document.getElementById('question-link');
        let Link = document.getElementById('profile-link');
        let questionContent = document.getElementById('question-content');
        let userInfo = document.getElementById('user-info');
        let upVotesCount = document.getElementById('up-votes');
        let downVotesCount = document.getElementById('down-votes');

        let answerTextArea = document.getElementById('answer-text-area');
        let addAnswerButton = document.getElementById('add-answer-button');





        window.addEventListener('load', () => {

            let pathname = window.location.pathname.trim('');
            let paths = pathname.split('/');
            let questionId = paths[2];
            let userId = paths[1];

            setProfilePageLink(profileLinkATag, userId);
            setQuestionPageLink(questionsLinkATag, userId);

            console.log(window.location);

            click(addAnswerButton, () => {
                let answer = answerTextArea.value;
                let data = {
                    questionId,
                    answer,
                    userId: userId,
                };

                addAnswer(questionId, data, (response) => {
                    if (response === 0 || response.data.status === false) {
                        alert("Error adding adding answer");
                        return;
                    }

                    answerTextArea.value = '';
                    alert(response.data.msg);
                });
            });




            getQuestion(questionId, (response) => {

                if (response === 0) {
                    alert('Error fetching data');
                    return;
                }
                let question = response.data.question;
                let answers = response.data.answers;

                if (question.length === 0) {
                    return;
                }

                displayQuestionDetail(question[0]);

                if (answers.length === 0) {
                    show(infoText);
                    return;
                }

                answers.forEach((answer) => {
                    displayAnswer(answer);
                });




                console.log(response.data.answers);

            });


            function displayQuestionDetail(question) {

                questionContent.innerHTML = question.content;
                userInfo.innerHTML = 'asked by: ' + question.name;
                /* upVotes.innerHTML = 'upvotes: ' + question.up_vote;
                 downVotes.innerHTML = 'downvotes: ' + question.down_vote;
                 */
            }


        })

    </script>

</body>

</html>
